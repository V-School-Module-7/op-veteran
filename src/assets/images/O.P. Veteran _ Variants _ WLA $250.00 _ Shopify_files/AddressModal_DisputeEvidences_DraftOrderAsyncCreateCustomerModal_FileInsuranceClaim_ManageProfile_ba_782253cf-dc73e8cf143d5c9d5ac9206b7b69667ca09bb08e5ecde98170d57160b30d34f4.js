(self.webpackJsonp=self.webpackJsonp||[]).push([["AddressModal~DisputeEvidences~DraftOrderAsyncCreateCustomerModal~FileInsuranceClaim~ManageProfile~ba~782253cf"],{"./app/components/AddressForm/AddressForm.tsx":function(e,t,n){"use strict";var o,s,r,a=n("./app/components/AddressForm/translations/en.json"),i=n.n(a),l=n("./node_modules/react/index.js"),d=n.n(l),c=n("./node_modules/@shopify/polaris/dist/esnext/components/FormLayout/FormLayout.tsx.esnext"),p=n("./node_modules/@shopify/polaris/dist/esnext/components/Stack/Stack.tsx.esnext"),u=n("./node_modules/@shopify/polaris/dist/esnext/components/SkeletonBodyText/SkeletonBodyText.tsx.esnext"),h=n("./node_modules/@shopify/react-i18n/build/esnext/decorator.esnext"),m=n("./node_modules/@shopify/address-consts/build/esnext/index.esnext"),y=n("./node_modules/@shopify/react-compose/build/esnext/index.esnext"),f=n("./packages/@web-utilities/decorators/index.ts"),C=n("./app/utilities/request-details/decorator.tsx"),b=n("./app/utilities/web-address-formatter/WebAddressFormatter.ts"),g=n("./node_modules/@shopify/polaris/dist/esnext/components/Select/Select.tsx.esnext"),v=n("./node_modules/@shopify/polaris/dist/esnext/components/Autocomplete/Autocomplete.tsx.esnext"),j=n("./node_modules/@shopify/polaris/dist/esnext/components/TextField/TextField.tsx.esnext"),x=n("./node_modules/lodash-decorators/index.js"),F=n("./packages/@shopify/address-autocomplete/index.ts"),O=n("./packages/@web-utilities/error/decorators.tsx"),w=n("./app/components/NameField/NameField.tsx"),A=n("./app/components/PhoneField/PhoneField.tsx");function k(e){return e.join("_")}function N(e,t){return t?`${t}[${e}]`:e}function z([...e],t){const n=e.findIndex((e=>-1!==e.indexOf(t)));if(-1===n)return[e,[],[]];{const[t,...o]=e.splice(n);return[e,t,o]}}function P(e,t){let n=e;return t&&(n=e.filter((e=>-1!==t.indexOf(e.code)))),n.map((e=>({label:e.name,value:e.code})))}function E(e){return e.map((({code:e,name:t})=>({label:t,value:e})))}function T(e,t){return e.find((({code:e})=>e===t))||e[0]}function S(e,t){if(!t)return;const n=t[e];if(n){if("string"==typeof n&&0===n.trim().length)return;return n}}function D(e,t){if(!t)return;const n=t[e];return n||void 0}function L(e){const t=z(e,m.a.FirstName)[1];if(t.length>0)return t}function $(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let _=(o=Object(x.memoize)(),s=Object(x.memoize)(),$((r=class extends d.a.PureComponent{constructor(...e){super(...e),this.state={autocompleteAddresses:[],autoCompleteRequestLoading:!1},this.addressAutocomplete=new F.a(this.props.address.country,this.props.i18n.locale.toUpperCase())}componentDidUpdate({address:{country:e}}){const{address:{country:t}}=this.props;t!==e&&t!==e&&this.addressAutocomplete.updateCountryCode(t)}shouldRender(){const{line:e,showName:t,showCompany:n,showPhone:o}=this.props,s=e.length>1;return e.includes(m.a.FirstName)||e.includes(m.a.LastName)?Boolean(t):e.includes(m.a.Company)?Boolean(n):e.includes(m.a.Phone)?Boolean(o):!s&&e.includes(m.a.Zone)?E(this.country.zones).length>0:0!==e.length}render(){const{autoCompleteEnabled:e,line:t,address:n,prefixName:o,countries:s,acceptedCountries:r,disabledFields:a,errors:i,requestDetails:{addressServices:l},autocompleteEnabledCountries:p,setCountryPlaceholder:u,showInvalidPhoneNumber:h,helpText:y}=this.props,{autocompleteAddresses:f,autoCompleteRequestLoading:C}=this.state,b=this.country;return b&&this.shouldRender()?d.a.createElement(c.a,null,d.a.createElement(c.a.Group,{condensed:!0},t.map((t=>{switch(t){case m.a.FirstName:return this.renderNameLine();case m.a.LastName:return null;case m.a.Country:return d.a.createElement(g.a,{key:m.a.Country,label:b.labels.country,name:N(m.a.Country,o),options:P(s,r),onChange:this.handleCountryChange,value:n.country,placeholder:u?b.labels.country:"",disabled:a.includes(t),error:S(m.a.Country,i),helpText:D(m.a.Country,y)});case m.a.Zone:return 0===E(b.zones).length?null:d.a.createElement(g.a,{key:m.a.Zone,name:N(m.a.Zone),label:b.labels.zone,options:E(b.zones),onChange:this.handleChange(t),value:n.province,disabled:a.includes(t),placeholder:b.labels.zone,error:S(m.a.Zone,i),helpText:D(m.a.Zone,y)});case m.a.Phone:return d.a.createElement(A.a,{key:`phoneField${n.country}`,autoCompleteEnabled:e,label:this.props.i18n.translate("phone"),initialRegionCode:n.country,value:n.phone||"",onChange:this.handlePhoneChange,error:S(m.a.Phone,i),showInvalidPhoneNumber:h,helpText:D(m.a.Phone,y)});default:return!l||t!==this.country.autocompletionField||p&&!p.includes(n.country)?d.a.createElement(j.a,{autoComplete:q(t,e),key:t,label:b.labels[I(t)],name:N(t,o),value:n[t],onChange:this.handleChange(t),disabled:a.includes(t),error:S(t,i),helpText:D(t,y)}):d.a.createElement(v.a,{key:"autocomplete",willLoadMoreResults:!0,selected:[n[t]||""],onSelect:this.handleAutocompleteSelect,options:f,loading:C,textField:d.a.createElement(j.a,{autoComplete:q(t,e),key:t,role:"combobox",label:b.labels[I(t)],name:N(t,o),value:n[t],onChange:this.handleAutocompleteChange(t),disabled:a.includes(t),error:S(t,i),helpText:D(t,y)})})}})))):null}async handleAutocompleteSelect(e){const{onChange:t}=this.props,n=await this.addressAutocomplete.select(e[0]);if(n){Object.keys(n).forEach((e=>{null===n[e]&&delete n[e]}));t({...n,country:n.countryCode,province:(o=n.provinceCode,s=this.country.zones,s.some((({code:e})=>e===o))?n.provinceCode:void 0)})}var o,s;this.setState({autocompleteAddresses:[]})}renderNameLine(){const{autoCompleteEnabled:e,address:t,prefixName:n,disabledFields:o,errors:s,orderedFields:r}=this.props;return d.a.createElement(w.a,{key:"name",autoCompleteEnabled:e,firstName:{autoCompleteValue:"given-name",label:this.country.labels.firstName,name:N(m.a.FirstName,n),value:t.firstName,onChange:this.handleChange(m.a.FirstName),disabled:o.includes(m.a.FirstName),error:S(m.a.FirstName,s)},lastName:{autoCompleteValue:"family-name",label:this.country.labels.lastName,name:N(m.a.LastName,n),value:t.lastName,onChange:this.handleChange(m.a.LastName),disabled:o.includes(m.a.LastName),error:S(m.a.LastName,s)},fieldOrder:r?L(r):void 0})}handleAutocompleteChange(e){const{onChange:t,i18n:n}=this.props;return o=>{t({[e]:o});const{address:s}=this.props;this.setState({autoCompleteRequestLoading:!0},(async()=>{try{const t=await this.addressAutocomplete.search(o,{...s,[e]:o});this.setState({autoCompleteRequestLoading:!1,autocompleteAddresses:0===t.length?[]:[...t.map((e=>({value:e.addressId,label:e.description}))),{value:"",label:n.translate("poweredByGoogle"),disabled:!0}]})}catch(t){this.setState({autoCompleteRequestLoading:!1},(()=>{this.props.errorLogger.notify(t,{severity:"info"})}))}}))}}get country(){const{countries:e,address:{country:t}}=this.props;return T(e,t)}handlePhoneChange(e){const{onChange:t}=this.props;t({phone:e})}handleCountryChange(e){const{countries:t,onChange:n,setDefaultZone:o=!0}=this.props,s=T(t,e);n({country:e,province:o&&s.zones&&s.zones[0]?s.zones[0].code:""})}handleChange(e){const{onChange:t}=this.props;return n=>{t({[e]:n})}}}).prototype,"handleAutocompleteSelect",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"handleAutocompleteSelect"),r.prototype),$(r.prototype,"handleAutocompleteChange",[o,f.a],Object.getOwnPropertyDescriptor(r.prototype,"handleAutocompleteChange"),r.prototype),$(r.prototype,"handlePhoneChange",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"handlePhoneChange"),r.prototype),$(r.prototype,"handleCountryChange",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"handleCountryChange"),r.prototype),$(r.prototype,"handleChange",[s],Object.getOwnPropertyDescriptor(r.prototype,"handleChange"),r.prototype),r);function q(e,t){return!1===t?"nope":function(e){const t={company:"organization",address1:"address-line1",address2:"address-line2",city:"address-level2",zip:"postal-code",default:"on"};return t[e]||t.default}(e)}function I(e){switch(e){case m.a.Zone:return"zone";case m.a.PostalCode:return"postalCode";default:return e}}var Z,R=Object(y.a)(Object(h.a)({id:"AddressLine_1h93v27",fallback:i.a,translations(e){if(!(["cs","da","de","es","fi","fr","it","ja","ko","nb","nl","pl","pt-BR","pt-PT","sv","th","tr","vi","zh-CN","zh-TW"].indexOf(e)<0))return(async()=>{const t=await n("./app/components/AddressForm/translations lazy-once recursive ^\\.\\/.*\\.json$")(`./${e}.json`);return t&&t.default})()}}),Object(C.a)(),Object(O.a)())(_);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function U(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let M=(U((Z=class extends d.a.Component{constructor(...e){super(...e),this.state={orderedFields:[],countries:[]},this.mounted=!1,this.addressFormatter=new b.a(this.props.i18n.locale,this.props.requestDetails.addressServices)}componentDidMount(){this.mounted=!0,this.fetchCountries()}componentDidUpdate({address:e}){const{address:t}=this.props;e.country!==t.country&&this.getOrderedFields()}componentWillUnmount(){this.mounted=!1}render(){const{autoCompleteEnabled:e,address:t,prefixName:n,acceptedCountries:o,showName:s,showCompany:r,showPhone:a,disabledFields:i=[],errors:l,orderNameFieldsByCountry:p,autocompleteEnabledCountries:u,setDefaultZone:h,setCountryPlaceholder:y,showInvalidPhoneNumber:f,helpText:C}=this.props,{orderedFields:b,countries:g}=this.state;if(0===b.length)return d.a.createElement(V,null);const[v,j,x]=z(b,m.a.Country),F={autoCompleteEnabled:e,acceptedCountries:o,address:t,countries:g,disabledFields:i,prefixName:n,showName:s,showCompany:r,showPhone:a,errors:l,onChange:this.handleChange,orderedFields:p?b:void 0,autocompleteEnabledCountries:u,setDefaultZone:h,setCountryPlaceholder:y,showInvalidPhoneNumber:f,helpText:C};return d.a.createElement(d.a.Fragment,null,d.a.createElement(c.a,null,v.map((e=>d.a.createElement(R,B({key:k(e)},F,{line:e}))))),d.a.createElement(c.a,null,d.a.createElement(R,B({},F,{line:j}))),d.a.createElement(c.a,null,x.map((e=>d.a.createElement(R,B({key:k(e)},F,{line:e}))))))}handleChange(e){const{address:t,onChange:n}=this.props;n&&n({...t,...e})}async getOrderedFields(){var e;if(null===(e=this.country)||void 0===e||!e.code)return;const t=await this.addressFormatter.getOrderedFields(this.country.code);this.mounted&&this.setState({orderedFields:t})}setDefaultZoneFieldValue(){this.handleChange({province:this.country.zones[0].code})}async fetchCountries(){const{i18n:e,address:t,setDefaultZone:n=!0}=this.props;this.addressFormatter.updateLocale(e.locale);const o=await this.addressFormatter.getCountries();this.mounted&&this.setState({countries:o},(()=>{var e;this.getOrderedFields(),t.country&&!t.province&&(null===(e=this.country)||void 0===e?void 0:e.zones.length)>0&&n&&this.setDefaultZoneFieldValue()}))}get country(){const{countries:e}=this.state,{address:{country:t}}=this.props;return T(e,t)}}).prototype,"handleChange",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleChange"),Z.prototype),U(Z.prototype,"getOrderedFields",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"getOrderedFields"),Z.prototype),U(Z.prototype,"setDefaultZoneFieldValue",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"setDefaultZoneFieldValue"),Z.prototype),U(Z.prototype,"fetchCountries",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"fetchCountries"),Z.prototype),Z);function V(){return d.a.createElement(c.a,null,d.a.createElement(p.a,{vertical:!0},d.a.createElement(u.a,{lines:3}),d.a.createElement(u.a,{lines:4}),d.a.createElement(u.a,{lines:3})))}t.a=Object(y.a)(Object(h.a)({id:"AddressForm_xxl21z",fallback:i.a,translations(e){if(!(["cs","da","de","es","fi","fr","it","ja","ko","nb","nl","pl","pt-BR","pt-PT","sv","th","tr","vi","zh-CN","zh-TW"].indexOf(e)<0))return(async()=>{const t=await n("./app/components/AddressForm/translations lazy-once recursive ^\\.\\/.*\\.json$")(`./${e}.json`);return t&&t.default})()}}),Object(C.a)())(M)},"./app/components/AddressForm/translations lazy-once recursive ^\\.\\/.*\\.json$":function(e,t,n){var o={"./cs.json":"./app/components/AddressForm/translations/cs.json","./da.json":"./app/components/AddressForm/translations/da.json","./de.json":"./app/components/AddressForm/translations/de.json","./en.json":"./app/components/AddressForm/translations/en.json","./es.json":"./app/components/AddressForm/translations/es.json","./fi.json":"./app/components/AddressForm/translations/fi.json","./fr.json":"./app/components/AddressForm/translations/fr.json","./it.json":"./app/components/AddressForm/translations/it.json","./ja.json":"./app/components/AddressForm/translations/ja.json","./ko.json":"./app/components/AddressForm/translations/ko.json","./nb.json":"./app/components/AddressForm/translations/nb.json","./nl.json":"./app/components/AddressForm/translations/nl.json","./pl.json":"./app/components/AddressForm/translations/pl.json","./pt-BR.json":"./app/components/AddressForm/translations/pt-BR.json","./pt-PT.json":"./app/components/AddressForm/translations/pt-PT.json","./sv.json":"./app/components/AddressForm/translations/sv.json","./th.json":"./app/components/AddressForm/translations/th.json","./tr.json":"./app/components/AddressForm/translations/tr.json","./vi.json":"./app/components/AddressForm/translations/vi.json","./zh-CN.json":"./app/components/AddressForm/translations/zh-CN.json","./zh-TW.json":"./app/components/AddressForm/translations/zh-TW.json"};function s(e){return r(e).then((function(e){return n.t(e,7)}))}function r(e){return n.e("AddressForm_xxl21z-i18n").then((function(){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}))}s.keys=function(){return Object.keys(o)},s.resolve=r,s.id="./app/components/AddressForm/translations lazy-once recursive ^\\.\\/.*\\.json$",e.exports=s},"./app/components/AddressForm/translations/en.json":function(e,t){e.exports={addressSuggestions:"Suggestions",poweredByGoogle:"Powered by Google",address1:"Address",city:"City",company:"Company",country:"Country",firstName:"First name",lastName:"Last name",phone:"Phone"}},"./app/components/NameField/NameField.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n("./node_modules/react/index.js"),s=n.n(o),r=n("./node_modules/@shopify/polaris/dist/esnext/components/FormLayout/FormLayout.tsx.esnext"),a=n("./node_modules/@shopify/polaris/dist/esnext/components/TextField/TextField.tsx.esnext"),i=n("./node_modules/@shopify/react-i18n/build/esnext/hooks.esnext"),l=n("./node_modules/@shopify/address-consts/build/esnext/index.esnext");function d(e){const[t]=Object(i.a)(),n=s.a.useMemo((()=>{if(e.fieldOrder)return e.fieldOrder;switch(t.locale){case"ja":case"kr":return[l.a.LastName,l.a.FirstName];default:return[l.a.FirstName,l.a.LastName]}}),[t.locale,e.fieldOrder]);return s.a.createElement(r.a,null,s.a.createElement(r.a.Group,null,n.map((t=>s.a.createElement(a.a,{key:t,autoComplete:!1===e.autoCompleteEnabled?"nope":e[t].autoCompleteValue,label:e[t].label,placeholder:e[t].placeholder,value:e[t].value,error:e[t].error,testID:e[t].testID,name:e[t].name,disabled:e[t].disabled,onChange:e[t].onChange})))))}},"./packages/@shopify/address-autocomplete/index.ts":function(e,t,n){"use strict";var o=n("./node_modules/@shopify/network/build/esnext/network.esnext"),s=n("./packages/@web-utilities/decorators/debounceAsync.ts"),r=n("./node_modules/uuid/index.js");var a,i,l="\nquery prediction($query: String, $addressQuery: AddressQueryInput $countryCode: AutocompleteSupportedCountry!, $locale: String!, $location: LocationInput, $sessionToken: String!) {\n  predictions(query: $query, addressQuery: $addressQuery, countryCode: $countryCode, locale: $locale, sessionToken: $sessionToken, location: $location ) {\n    addressId\n    description\n    matchedSubstrings {\n      length\n      offset\n    }\n    completionService\n    addressData {\n      address1\n      address2\n      city\n      zip\n      country\n      countryCode\n      province\n      provinceCode\n    }\n  }\n}\n\nquery details($addressId: String!, $locale: String!, $sessionToken: String!) {\n  address(id: $addressId, locale: $locale, sessionToken: $sessionToken) {\n    address1\n    address2\n    city\n    zip\n    country\n    countryCode\n    province\n    provinceCode\n  }\n}\n";const d="https://autocomplete-service.shopifycloud.com/graphql";var c;!function(e){e.Prediction="prediction",e.Details="details"}(c||(c={}));const p={DEFAULT:3,NL:0,JP:2},u={[o.b.ContentType]:"application/json",[o.b.AccessControlAllowOrigin]:"*"};let h=(a=Object(s.a)(200),m=(i=class{constructor(e,t,n){this.lastPredictions=[],this.countryCode=e,this.locale=t,this.location=n,this.countryCode=e,this.locale=t.toUpperCase(),this.location=n,this.sessionToken=Object(r.v4)()}updateCountryCode(e){this.countryCode=e}getSessionToken(){return this.sessionToken}setSessionToken(e){this.sessionToken=e}async search(e,t={}){if(!this.countryCode||!this.shouldSearch(e))return[];const n=await fetch(d,{method:o.c.Post,headers:u,body:JSON.stringify({query:l,operationName:c.Prediction,variables:{query:e,addressQuery:{address1:t.address1,address2:t.address2,company:t.company,city:t.city,countryCode:t.country,postalCode:t.zip,zoneCode:t.province},countryCode:this.countryCode,locale:this.locale,location:this.location,sessionToken:this.getSessionToken()}})}),s=await n.json();if("errors"in s)throw new v(s);return this.lastPredictions=s.data.predictions||[],s.data.predictions||[]}async select(e,t=this.locale){const n=this.getAddressData(e);if(n)return n;const s=await fetch(d,{method:o.c.Post,headers:u,body:JSON.stringify({query:l,operationName:c.Details,variables:{addressId:e,locale:t,sessionToken:this.sessionToken}})}),a=await s.json();if(this.setSessionToken(Object(r.v4)()),"errors"in a)throw new v(a);return a.data.address}getAddressData(e){const t=this.lastPredictions.find((t=>t.addressId===e));return t?t.addressData:null}shouldSearch(e){const t=p[this.countryCode];return e.length>=("number"==typeof t?t:p.DEFAULT)}}).prototype,y="search",f=[a],C=Object.getOwnPropertyDescriptor(i.prototype,"search"),b=i.prototype,g={},Object.keys(C).forEach((function(e){g[e]=C[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=f.slice().reverse().reduce((function(e,t){return t(m,y,e)||e}),g),b&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(b):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(m,y,g),g=null),i);var m,y,f,C,b,g;class v extends Error{constructor(e){super(`[AddressAutocompleteError] ${e.errors.map((e=>e.message)).join("; ")}`)}}t.a=h},"./packages/@web-utilities/error/decorators.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("./node_modules/react/index.js"),s=n.n(o),r=n("./packages/@web-utilities/components/index.ts"),a=n("./packages/@web-utilities/error/context.ts");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function l(){return function(e){var t,n;return n=t=class extends s.a.Component{render(){return s.a.createElement(a.a.Consumer,null,(t=>s.a.createElement(e,i({errorLogger:t},this.props))))}},t.displayName=`withError(${Object(r.a)(e)})`,t.WrappedComponent=e,n}}}}]);